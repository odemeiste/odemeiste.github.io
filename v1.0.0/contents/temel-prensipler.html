<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>3. Temel Prensipler | Ödeme İste</title>
    <meta name="generator" content="VuePress 1.9.7">
    
    <meta name="description" content=" ">
    
    <link rel="preload" href="/assets/css/0.styles.4cb6486d.css" as="style"><link rel="preload" href="/assets/js/app.d7d3f13d.js" as="script"><link rel="preload" href="/assets/js/8.700583ab.js" as="script"><link rel="preload" href="/assets/js/2.9db75618.js" as="script"><link rel="preload" href="/assets/js/29.105f909f.js" as="script"><link rel="prefetch" href="/assets/js/10.a1a933a7.js"><link rel="prefetch" href="/assets/js/11.c383c882.js"><link rel="prefetch" href="/assets/js/12.b218524e.js"><link rel="prefetch" href="/assets/js/13.84d89d01.js"><link rel="prefetch" href="/assets/js/14.aeae9afb.js"><link rel="prefetch" href="/assets/js/15.04506de2.js"><link rel="prefetch" href="/assets/js/16.31fdfc30.js"><link rel="prefetch" href="/assets/js/17.e6a3262c.js"><link rel="prefetch" href="/assets/js/18.2fbf31b8.js"><link rel="prefetch" href="/assets/js/19.a5366f29.js"><link rel="prefetch" href="/assets/js/20.e6cb0fa6.js"><link rel="prefetch" href="/assets/js/21.075ab61a.js"><link rel="prefetch" href="/assets/js/22.d12a55a5.js"><link rel="prefetch" href="/assets/js/23.a94ccf8d.js"><link rel="prefetch" href="/assets/js/24.02681917.js"><link rel="prefetch" href="/assets/js/25.8a29cc0d.js"><link rel="prefetch" href="/assets/js/26.c39ac248.js"><link rel="prefetch" href="/assets/js/27.d8e6daaa.js"><link rel="prefetch" href="/assets/js/28.33fc6d39.js"><link rel="prefetch" href="/assets/js/3.971bb22d.js"><link rel="prefetch" href="/assets/js/30.5c6c3f3c.js"><link rel="prefetch" href="/assets/js/31.c690a853.js"><link rel="prefetch" href="/assets/js/32.1a7002ec.js"><link rel="prefetch" href="/assets/js/33.bc909173.js"><link rel="prefetch" href="/assets/js/34.b468e26c.js"><link rel="prefetch" href="/assets/js/35.7ac70ca6.js"><link rel="prefetch" href="/assets/js/4.f7be602e.js"><link rel="prefetch" href="/assets/js/5.a992f5da.js"><link rel="prefetch" href="/assets/js/6.c85da2e9.js"><link rel="prefetch" href="/assets/js/7.9fc63faa.js"><link rel="prefetch" href="/assets/js/9.6a998bea.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4cb6486d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/assets/TCMB_logo.svg.png" alt="Ödeme İste" class="logo"> <span class="site-name can-hide">Ödeme İste</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/v2.0.0/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable"><span>SÜRÜM 2.0.0-Aktif Sürüm</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/v1.0.0/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable open"><span>SÜRÜM 1.0.0</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/v1.0.0/contents/tanim-ve-kisitlamalar.html" class="sidebar-link">1. Tanımlar ve Kısıtlamalar</a></li><li><a href="/v1.0.0/contents/amac-ve-kapsam.html" class="sidebar-link">2. Amaç ve Kapsam</a></li><li><a href="/v1.0.0/contents/temel-prensipler.html" aria-current="page" class="active sidebar-link">3. Temel Prensipler</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-1-genel-ilkeler" class="sidebar-link">3.1 Genel İlkeler</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-2-restful-api" class="sidebar-link">3.2 RESTful API</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-3-surum-yonetimi" class="sidebar-link">3.3.	Sürüm Yönetimi</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-4-kaynak-uri-yol-yapısı" class="sidebar-link">3.4.	Kaynak URI Yol Yapısı</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-5-karakter-kodlama" class="sidebar-link">3.5.	Karakter Kodlama</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-6-veri-formatı" class="sidebar-link">3.6.	Veri Formatı</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-7-istemci-sertifika-yonetimi" class="sidebar-link">3.7.	İstemci Sertifika Yönetimi</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-8-sunucu-sertifikaları" class="sidebar-link">3.8.	Sunucu Sertifikaları</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-9-istek-cevap-mesajlarında-kullanılan-nesne-yapıları" class="sidebar-link">3.9. İstek/Cevap Mesajlarında Kullanılan Nesne Yapıları</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-10-mesaj-imzalama" class="sidebar-link">3.10. Mesaj İmzalama</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-11-durum-kodu" class="sidebar-link">3.11. Durum Kodu</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-12-gereksinimlerinin-sınıflandırılması" class="sidebar-link">3.12. Gereksinimlerinin Sınıflandırılması</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-13-istek-baslıgı" class="sidebar-link">3.13. İstek Başlığı</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-14-yanıt-baslıgı" class="sidebar-link">3.14. Yanıt Başlığı</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-15-idempotency-kuralları" class="sidebar-link">3.15. Idempotency Kuralları</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-16-http-durum-kodları" class="sidebar-link">3.16. HTTP Durum Kodları</a></li><li class="sidebar-sub-header"><a href="/v1.0.0/contents/temel-prensipler.html#_3-17-sıralı-veri-turleri" class="sidebar-link">3.17. Sıralı Veri Türleri</a></li></ul></li><li><a href="/v1.0.0/contents/odeme-iste-durumlari.html" class="sidebar-link">4. Ödeme İste Durumları</a></li><li><a href="/v1.0.0/contents/odeme-iste-sistemi-ve-kavramlar.html" class="sidebar-link">5. Ödeme İste Sistemi ve Kavramlar</a></li><li><a href="/v1.0.0/contents/odeme-iste-modelleri.html" class="sidebar-link">6. Ödeme İste Kullanım Modelleri</a></li><li><a href="/v1.0.0/contents/odeme-iste.html" class="sidebar-link">7. Ödeme İste</a></li><li><a href="/v1.0.0/contents/katilimci-dogrulama.html" class="sidebar-link">8. Ödeme İste Zaman Aşımı ve FAST Doğrulama Kontrolleri</a></li><li><a href="/v1.0.0/contents/ohs-api.html" class="sidebar-link">9. OHS API</a></li></ul></section></li><li><a href="/sorulan-sorular.html" class="sidebar-link">Sıkça Sorulan Sorular</a></li><li><section class="sidebar-group collapsable depth-0"><a href="/kurumsal-api/contents/tanim-ve-kisitlamalar" class="sidebar-heading clickable"><span>Öİ Kurumsal API 1.0.0-Aktif Sürüm</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_3-temel-prensipler"><a href="#_3-temel-prensipler" class="header-anchor">#</a> 3. Temel Prensipler </h1> <p>Bu bölümde Ödeme İste Servisleri için tanımlanan temel prensipler açıklanmaktadır.</p> <h2 id="_3-1-genel-ilkeler"><a href="#_3-1-genel-ilkeler" class="header-anchor">#</a> 3.1 Genel İlkeler</h2> <ul><li>Ödeme İste Sistemi, BKM tarafından işletilecektir.</li> <li>7x24 esasına göre çalışacaktır.</li> <li>FAST Sistemi katılımcıları katılabilir. Ancak, FAST Sistemine katılımları TCMB nezdinde onaylanmış katılımcı adayları da Ödeme İste Sistemine katılım sağlamak üzere hazırlıklara başlayabilir.</li> <li>Öİ sonrası gerçekleşen ödeme işlemleri gerçekleştiği ödeme sisteminin kurallarına tabidir.</li> <li>Bir ÖHS hem Alacaklı hem de Borçlu katılımcı olarak hizmet vermek zorundadır.</li> <li>Alacaklı ÖHS’lerin, Bölüm 6.1‘de yer alan kullanım modellerinden asgari “Sonra Kabul Hemen Öde” modelini Alacaklı’ya sunması zorunlu iken, Borçlu ÖHS için tüm modelleri desteklemesi zorunludur.</li> <li>Sistemdeki Öİ işlemleri arşivlenecektir.</li> <li>Öİ akışları, Havale veya FAST Sistemi ödemeleri için kullanılabilecektir.FAST sistemi üzerinden yapılacak ödemeler için FAST limitleri geçerli olacaktır. FAST ve Havale için sadece TL transfer gerçekleştirilebilir.</li> <li>Öİ ile gerçekleştirilecek işyeri ödemeleri, FAST İşyeri Ödemeleri kapsamında değerlendirilecek olup, üye işyeri ve takas komisyonu ile ilgili kurallar uygulanacaktır.</li> <li>Alacaklı ve Borçlu’nun aynı ÖHS nezdindeki hesapları arasındaki (İng. “onus”) Öİ ve akabindeki ödeme (Havale) akışları farklılaşabilecek olsa da (örneğin; Ödeme İste ve FAST Sistemi mesaj yapıları yerine banka içi mesaj yapıları kullanılacaktır) bu belge kapsamındaki kurallar (doğrulama kuralları, kullanım modelleri, hizmet seviyeleri vb.) gözetilerek uygulanmalıdır.</li> <li>Öİ’nin başlatılabilmesi için gereken Borçlu bilgileri, Borçlu tarafından hesap bilgisi (Ad Soyad, IBAN) olarak paylaşılabileceği gibi TR Karekod veya Kolay Adres şeklinde de paylaşılabilir.</li> <li>Öİ akışlarında kullanılan ilgili bilgilerin Borçlu ÖHS tarafından ödeme işleminin gerçekleştirileceği ödeme sistemine taşınması gerekmektedir.</li> <li>Katılımcılar, Müşterilerinden gelen ve Müşterilerine gitmesi gereken talep ve sonuçlara ilişkin anlık olarak bildirim yapmalıdır.Anlık bildirimler ÖHS tarafından iletilecek SMS ya da push notifikasyon olabilir. Müşterinin iletişim tercihi birincil iletişim kanalı olmak üzere en azından SMS ile bilgilendirme yapılması beklenmektedir.</li> <li>Alacaklı ÖHS olarak borçlu ÖHS'den kabul ya da red durum değişikliği bildirimi geldiğinde Alacaklı ÖHS'nin müşterisini bilgilendirmesi zorunludur.</li> <li>Müşterilerin Borçlu olarak Öİ almama hakları bulunmakta olup, bu yönde tercihi bulunan Müşterilere Öİ sunulmaz. (Söz konusu tercihin güncellenebileceği araç/arayüzler müşterilere sunulmalıdır)</li> <li>Ödeme İste katman servisinin müşterilere sunulması için mobil kanalın kullanılması zorunlu olup diğer kanalların kullanımı ödeme hizmeti sağlayıcılarının tercihine bırakılmıştır. Mobil uygulama yüklü olmayan müşterilerde davet isteği göndermek ÖHS inisiyatifindedir.</li> <li>Müşterilerin Öİ’ye karşılık verdikleri yanıtın içeriği, onların yasal yükümlülüklerini değiştirmez. Örneğin, fatura ödemesine ilişkin bir Öİ talebi alan Borçlu’nun olumsuz yanıt vermesi, onun faturayı ödeme yükümlülüğünü ortadan kaldırmaz.</li> <li>TR Karekod ile başlatılan ödeme iste akışlarının, FAST TR Karekod Teknik İlke ve Kurallar Rehberi’nde belirlenen zorunlu üretime geçiş tarihleri gözetilerek desteklenmesi gerekmektedir.</li> <li>Alacaklı ÖHS alacaklı müşteriden Öİ talebini aldığı sırada kendi tarafındaki güvenlik süreçlerini işletmesi ve Öİ talebini Borçlu ÖHS’ye iletmeden işlemi sonlandırması tavsiye edilmektedir.</li> <li>ÖHS’lerin sunuyor oldukları servisleri en fazla 3000 ms içinde yanıt dönecek şekilde tasarlamalıdır.</li> <li>ÖHS'ler mevcut online işlem kanallarından sundukları erişilebilirlik ve performans kriterlerinden daha düşük bir hizmet kalitesi sunmamalıdır.</li> <li>Ödeme İste kanal veya yetki tanımı varsayılan değerinin Açık ya da Kapalı olarak sunulması ÖHS inisiyatifindedir.
<br> - Kanal veya yetki tanımı varsayılan değerinin AÇIK olması önkoşulu olarak Müşteri’nin mobil bankacılık (çevrimiçi) kanalının açık olması beklenmektedir. Ek olarak, Borçlu müşteriye ilk Ödeme İste talebi geldiğinde Borçlu ÖHS tarafından Ödeme İste kanal/yetki tanımının kapatılabilmesi seçeneği sunulmalıdır.
<br> -  Kanal veya yetki tanımı varsayılan değerinin KAPALI tanımlanması durumunda, Borçlu müşteriye ilk Ödeme İste talebi geldiğinde işlem reddedilecek(Alacaklı ÖHS’ye TR.OIS.Business.RestrictedAccount hata kodu ile dönülecek) ancak, Borçlu ÖHS tarafından müşteriye kendisine bir Ödeme İste talebi geldiği bilgisi verilmeli ve kanal/yetki açabilme seçeneği sunulmalıdır.</li> <li>Kanal bilgisi açık olup sonradan kapalı hale getirilen borçlu müşteride mevcutta ödenmemiş ve iptal edilmemiş Öİ taleplerinin yaşam döngüsü devam ettirilmelidir.</li> <li>Ödeme İste Hizmeti'nin Alacaklı ve Borçlu akışları için müşteri tipleri özelinde destekleme bilgisi aşağıdaki şekildedir.</li></ul> <table><thead><tr><th>Alacaklı ÖHS Müşteri Tipi</th> <th>Alacaklı ÖHS Desteği(İsteğe Bağlı/Zorunlu)</th> <th>Borçlu ÖHS Müşteri Tipi</th> <th>Borçlu ÖHS Desteği(İsteğe Bağlı/Zorunlu)</th> <th>Borçlu ÖHS Aksiyon</th></tr></thead> <tbody><tr><td>Kurumsal</td> <td>İ</td> <td>Kurumsal</td> <td>İ</td> <td>Kurumsal müşteri desteği verilmediği durumda hata kodu üretilecektir.</td></tr> <tr><td>Kurumsal</td> <td>İ</td> <td>Bireysel</td> <td>Z</td> <td>-</td></tr> <tr><td>Bireysel</td> <td>Z</td> <td>Kurumsal</td> <td>İ</td> <td>Kurumsal müşteri desteği verilmediği durumda hata kodu üretilecektir.</td></tr> <tr><td>Bireysel</td> <td>Z</td> <td>Bireysel</td> <td>Z</td> <td>-</td></tr></tbody></table> <p><strong>&quot;İsteğe bağlı&quot; olan alanların &quot;zorunlu&quot; olacağı son tarih 21 Temmuz 2024 olarak belirlenmiştir.</strong></p> <h2 id="_3-2-restful-api"><a href="#_3-2-restful-api" class="header-anchor">#</a> 3.2 RESTful API</h2> <p>API’ler, dünya ölçeğinde yaygın bir şekilde kullanılan Temsili Durum Transferi (Representational State Transfer, REST) mimari tarzı ve JavaScript Nesne Notasyonu (JavaScript Object Notation, JSON) veri formatlarına uygun olarak geliştirilir. En üst seviye Veri Tanımlama Dili (Data Description Language) ve en iyi uygulama örnekleri için <a href="http://json-schema.org/" target="_blank" rel="noopener noreferrer">^JSON Şeması<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> temel alınır.</p> <p>İstek ve yanıt mesajlarında, isteğe bağlı veya koşullu bir alan, değer içermiyorsa, bu alan JSON payloadunda yer almamalıdır.</p> <p>Örnek kod bloğu.</p> <div class="language- extra-class"><pre class="language-text"><code>&quot;alacakliBilgi&quot;:{
         &quot;musteriTipi&quot;:&quot;B&quot;,
         &quot;ohsKod&quot;:&quot;8000&quot;,
         &quot;kimlik&quot;:  {
             &quot;kimlikTipi&quot;: &quot;K&quot;,
             &quot;kimlikDegeri&quot;: &quot;12345678900&quot;
        },
        &quot;hesap&quot;:    {
            &quot;hesapNo&quot;: &quot;TR800800G2BGNZ90MXSE96SW2&quot;,
            &quot;hesapSahibi&quot;: &quot;AHMET YILMAZ&quot;
      }
      },
</code></pre></div><h2 id="_3-3-surum-yonetimi"><a href="#_3-3-surum-yonetimi" class="header-anchor">#</a> 3.3.	Sürüm Yönetimi</h2> <p>API sonraki aşamalarda doğabilecek gereksinimleri ve daha karmaşık kullanım durumlarını karşılamak için sürümler halinde geliştirilir ve bu durum tasarım sırasında göz önünde bulundurulur.</p> <p>Öİ API İlke ve Kuralları v1.0 sürümünde ;</p> <ul><li>İlk fazda Sonra Kabul Hemen Öde modeli olacaktır.</li></ul> <h2 id="_3-4-kaynak-uri-yol-yapısı"><a href="#_3-4-kaynak-uri-yol-yapısı" class="header-anchor">#</a> 3.4.	Kaynak URI Yol Yapısı</h2> <p>ÖHS’lerin başlattığı çağrılarda URI yolu aşağıdaki yapıyı takip eder:</p> <p><strong>[öhs-yol-ön-eki]/odeme-iste-api/[kaynak-grubu]/[sürüm]/ [kaynak]/[kaynak-no]</strong></p> <p><strong>[öhs-yol-ön-eki]/odeme-iste-api/ois/s1.0/odeme-iste/odemeIsteRefNo</strong></p> <p>Bu, aşağıdaki unsurlardan oluşur:</p> <ul><li>[öhs-yol-ön-eki]
İsteğe bağlı, ÖHS'ye özgü yol ön ekini ifade eder.
GEÇİT üzerinden yapılan çağrılarda BKM tarafından belirlenen sistem adı ve yol ön eki kullanılır.</li> <li>ois, ois-api
Sabit metin “ois” (Ödeme İste Servisleri kısaltması)</li> <li>[kaynak-grubu]
Kaynak grubu, API’ye erişmek için kullanılan ödeme iste hizmeti için erişim adresi (end point) grubunu tanımlar (&quot;ois&quot;).</li> <li>[sürüm]
API sürümünü ifade eder (“/s[ana-sürüm].[alt-sürüm]/”).</li> <li>[kaynak]/[kaynak-no]
Kaynak detaylarını ifade eder.</li></ul> <p>ÖHS, tüm kaynakları için aynı katılımcı yolu ön ekini ve sistem adını kullanmalıdır. BKM API’lerine erişmek isteyen uygulamaların yetkilerine göre aşağıdaki API’ye abone olmaları gerekmektedir.
OIS (Ödeme İste Servisleri) :</p> <ul><li>https://xbank.com.tr/api-portal/odeme-iste-api/ois/s1.0/odeme-iste (ÖHS)</li> <li>https://secure.api-preprod.bkm.com.tr/odeme-iste-api/ois/s1.0/odeme-iste (BKM GEÇİT)</li></ul> <h2 id="_3-5-karakter-kodlama"><a href="#_3-5-karakter-kodlama" class="header-anchor">#</a> 3.5.	Karakter Kodlama</h2> <p>API istekleri ve yanıtlarının <strong>Başlık</strong> parametrelerinde ISO-8859-1 standartında yer alan karakter kümesi kullanılmalıdır.</p> <p>API istekleri ve yanıtlarında <strong>Gövde</strong> parametrelerinde UTF-8 karakter kodlaması kullanılır. Bu, JSON için varsayılan karakter kodlamasıdır.</p> <p>Ancak, bir ÖHS'nin kendi uygulamaları ve ödeme başlattığı ödeme sistemi (Havale vb.) bazı UTF-8 karakterlerini kabul etmeyebilir. ÖHS, UTF-8 kodlaması içeren bir mesajı işleyemez ve reddederse, HTTP 400 (Hatalı İstek) durum kodu ile yanıt vermelidir.</p> <h2 id="_3-6-veri-formatı"><a href="#_3-6-veri-formatı" class="header-anchor">#</a> 3.6.	Veri Formatı</h2> <ul><li>Ödeme İste kapsamındaki zaman damgası, ISO 8601 standartına uygun olarak yerel saat bilgisini ve timezone bilgisini de içerecek şekilde &quot; yyyy-MM-dd’T’HH:mm:ssXXX &quot; formattaki haliyle hazırlanmalıdır.</li></ul> <p>Örnek:  &quot;timestamp&quot;: &quot;2021-05-30T20:34:15+03:00&quot;<br>
yyyy : 4 hane yıl<br>
MM : Başa ‘0’ eklenmiş, toplam 2 hane ay<br>
dd    : Başa ‘0’ eklenmiş, toplam 2 hane gün<br>
HH    : Başa ‘0’ eklenmiş, toplam 2 hane saat (0-23 arası değer alabilir.)<br>
mm : Başa ‘0’ eklenmiş, toplam 2 hane dakika<br>
ss    : Başa ‘0’ eklenmiş, toplam 2 hane saniye<br>
XXX : ISO 8601 Time zone</p> <ul><li>Zaman damgası hesaplamalarında, yeni günün başlangıç saatinin 00:00:00 olduğu kabul edilmiştir.</li> <li>JWT veri paketlerinde kullanılan zaman damgaları, 1 Ocak 1970 Saat 00:00:00 (UTC) anından itibaren geçen saniye sayısı değerini (Unix Time) kullanmalıdır.</li> <li>Bir ÖHS, tarihi yanlış biçimlendirilmiş bir istek aldığında, 400 (Hatalı İstek) durum kodu ve ilgili hata kodu ile yanıt vermelidir.</li> <li>ISO 4217 Standartında para birimleri ve kaç basamak ondalık değer içerebilecekleri belirlenmiştir.
<a href="https://www.iso.org/iso-4217-currency-codes.html" target="_blank" rel="noopener noreferrer">https://www.iso.org/iso-4217-currency-codes.html<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> adresinden ücretsiz olarak listeye erişilebilir.
API Standartlarında da para birimleri ISO 4217’de tanımlanmış olan 3 harfli kodlarla iletilir.
Örneğin; Ödeme İste API'sindeki &quot;Tutar&quot; alanı &quot;100.25&quot; ve &quot;Para Birimi&quot; alanı &quot;TRY&quot; olarak iletildiğinde 25 değerinin kuruş olduğu anlaşılmalıdır.</li> <li>Sıralı veri tipleri büyük küçük harfe duyarlı olmalıdır.</li></ul> <h2 id="_3-7-istemci-sertifika-yonetimi"><a href="#_3-7-istemci-sertifika-yonetimi" class="header-anchor">#</a> 3.7.	İstemci Sertifika Yönetimi</h2> <p>Öİ kapsamında ÖHS’lerin güvenli bir şekilde tanımlanması amacıyla elektronik sertifikalar kullanılır.</p> <p>Öİ kapsamında tarafların güvenli bir şekilde tanımlaması, uçtan uca güvenli iletişim, mesaj şifreleme ve mesaj imzalama işlevleri 15/1/2004 tarihli ve 5070 sayılı Elektronik İmza Kanunu’nda açıklanan elektronik sertifikalar kullanılarak sağlanır. Elektronik sertifikada Türkiye Cumhuriyet Merkez Bankası tarafından verilen kuruluş kodu ve kuruluşun türüne dair bilgiler bulunur.</p> <p>Tüm katılımcıların GEÇİT'e erişebilmesi için, BKM tarafından yapılan istemci sertifika doğrulamasından geçmesi gerekmektedir. İstemci sertifikası üretilmeden önce katılımcıların CSR üretme akışını tamamlaması gerekmektedir.</p> <p><strong>OpenSSL ile CSR (Certificate Signing Request) Oluşturma</strong></p> <p>Aşağıdaki komut ile 2048-bit RSA private key ve CSR oluşturulur.
openssl req -new -newkey rsa:2048 -nodes -keyout PRIVATEKEY.key -out CSR.csr
CSR ile ilgili detay bilgilerin girişinde;
Common Name (CN) olarak 4 karakterli ÖHS Kod(üye kodu) diğer alanlar için de kurum bilgileriniz ile giriş yapılır.</p> <p>Tüm bilgilerin girilmesinden sonra oluşan private key dosyası kurumunuzda saklanır. CSR dosyası ise istemci sertifika üretmek üzere kullanılır. Bu aşamada takip edilmesi gereken adımlar şu şekildedir:</p> <p>Katılımcıların, TRIP ortamı üzerinden, BKM Tarafından yetki verilmiş kullanıcılarının görebileceği &quot;İstemci Sertifika Talebi&quot; menü adımına giriş yapmaları beklenir. Açılan ekranda,&quot;CSR Dosyası Yükleme&quot; alanı içerisine, katılımcının üretmiş olduğu csr dosyası yüklenir. Yaklaşık 1 dakika içerisinde kuruma özel olarak üretilmiş olan client sertifikası indirilmeye hazır hale gelecektir. &quot;İndir&quot; butonu ile client sertifika indirilir. İstemci tarafında web isteğinin ilgili sertifika ile ilişkilendirilerek oluşturulması gerekmektedir. İstemci sertifikaları hem test hem de üretim ortamı için ayrı ayrı oluşturulup kullanılacaktır.</p> <h2 id="_3-8-sunucu-sertifikaları"><a href="#_3-8-sunucu-sertifikaları" class="header-anchor">#</a> 3.8.	Sunucu Sertifikaları</h2> <p>Sunucu sertifikalarının endpoint bilgisini (Fqdn) içerecek ve global bir Certification Authority tarafından imzalanmış olarak sunulması gerekmektedir. Örneğin; entegrasyon formu içerinde yer alan URL bilgisinin (test.xbank.com.tr) sertifika içerisinde tanımlı olması ve bu sertifikanın global bir CA örneğin Verisign tarafından imzalanmış olarak sunulması gerekmektedir.
ÖHS'ler tarafından sunucu sertifikaları uygulanmalıdır.</p> <h2 id="_3-9-istek-cevap-mesajlarında-kullanılan-nesne-yapıları"><a href="#_3-9-istek-cevap-mesajlarında-kullanılan-nesne-yapıları" class="header-anchor">#</a> 3.9. İstek/Cevap Mesajlarında Kullanılan Nesne Yapıları</h2> <p>İstek ve Cevap mesajlarında kullanılacak olan nesneler tüm elemanlarını kapsayacak şekilde Ödeme İste Swagger dosyasında detaylı olarak paylaşılmıştır.</p> <h2 id="_3-10-mesaj-imzalama"><a href="#_3-10-mesaj-imzalama" class="header-anchor">#</a> 3.10. Mesaj İmzalama</h2> <p>Dijital imzalama yapısı, Ödeme İste API’de gerçekleştirilen işlemlerin ve taşınan verilerin bütünlük ve inkâr edilemezliğini sağlamak amacıyla kurgulanmıştır. İmzaların kaynak bazında hangi istek ve yanıtlara uygulandığı belirlidir.</p> <p>API yalnızca TLS'ye dayanırsa, dijital kayıtları ve inkâr edilemezlik kanıtlarını tutmak zor olur. Bu nedenle, TLS'ye dayanmayan bir inkâr edilemezlik çözümü olarak API isteğinin HTTP başlığında bir JWS kullanılarak sağlanabilir.</p> <p>HTTP isteğinin gövdesinin hash fonksiyonu (SHA256) ile özeti alınacaktır. Elde edilen özet, asimetrik anahtarları destekleyen bir algoritma kullanılarak imzalanacak ve JWS elde edilecektir.</p> <p>Bu kapsamda imzalama akışı aşağıdaki gibi olmalıdır:</p> <ul><li>ÖHS öncelikle özel ve açık anahtarlarını oluşturmalıdır. Bu anahtarları oluşturmak için aşağıda “openssl” kullanılarak oluşturma örneği paylaşılmıştır. Bu anahtarlardan özel olan anahtar mesajı imzalamak için kullanılacak olup, açık anahtar ise mesajı doğrulamak amacıyla mesajın alıcısı tarafından kullanılacaktır.</li></ul> <p>private_key.pem ve public_key.pem dosyasinin içerikleri kod tarafında kullanılacaktır.
--private.pem =&gt; Özel anahtarın ismi openssl genrsa -out private.pem 2048
--public_key.pem =&gt; Açık anahtarın ismi openssl rsa -in private.pem -pubout -outform PEM -out public_key.pem
--private_key.pem =&gt; Özel anahtarın PCKS8 formatına çevrilmesi (Java açısından PCKS8 formatında olma ihtiyacı nedeniyle) openssl pkcs8 -topk8 -inform PEM -in private.pem -out private_key.pem –nocrypt</p> <ul><li><p>Açık ve Özel anahtarlar oluşturulduktan sonra Açık Anahtar BKM ile paylaşılır. BKM bu açık anahtarı diğer katılımcıların ulaşabilmesi ve alabilmesi için bir Anahtar Deposu yaklaşımı ile bünyesinde tutar. İlgili anahtarı iletebilmek ve alabilmek için kullanılacak OHS API’ye erişim detayları 9.OHS API içerisinde detaylı olarak paylaşılmıştır. Eğer kurumun ilgili anahtar çiftinin yenilenme durumu söz konusu ise yenilemenin hemen ardından açık anahtar yeni bir imzalama yapılmadan önce mutlaka BKM ile paylaşılmalıdır.</p></li> <li><p>İmzalı mesajı açacak olan kurum mesajı imzalayan kurumun açık anahtarını her sorguda yeniden almak durumunda değildir. Belirli periyodlarda kendi ortamındaki anahtarı yenileyerek sistemi işletebilir. Ancak imzalayan kurum anahtar çifti yenilemesi yaptığında BKM ile açık anahtarını paylaşsa dahi imzalı mesajı doğrulayacak taraf eski açık anahtar ile doğrulama yapmaya çalıştığı için hata alacaktır. Bu ilk hata durumunda hızlıca BKM üzerinden yeni anahtarı alıp mesajı tekrar doğrulamayı denemelidir. Eğer yine hata alıyor ise doğrulama işlemini hata statüsüne almalıdır. Bu sebeple anahtar yenileyen kurum yeni açık anahtarını yeni bir mesaj imzalama yapmadan önce mutlaka BKM ile paylaşmalıdır.</p></li> <li><p>Yanıt mesajının içerisinde yer alan imzanın doğrulanması aşamasında hata alınması durumunda işleme devam edilmemeli ve hata üretilerek paydaşlara bilgi verilmelidir.</p></li></ul> <p><strong>İmzalama Kuralları (İsteği Başlatan ÖHS)</strong></p> <p>ÖHS üzerinden başlayan akış örnek olarak paylaşılmıştır.</p> <ul><li>İsteği başlatan ÖHS, mesaj imzalama gerektiren her API isteğinin HTTP gövdesini (request body) kendi özel anahtarı ile şifreleyerek imza bilgisini oluşturur.</li> <li>Ardından bu imza verisini, göndereceği mesajın istek başlığında yer alan X-JWS-Signature alanında göndermelidir.</li> <li>X-JWS-Signature alanında gönderilecek olan bilgi aşağıdaki yöntem ile oluşturulmalıdır.
<ol><li>Bu alana yazılacak olan bilgi JWT formatında oluşturulmalıdır.</li> <li>Bir JWT, header-payload-signature alanlarından oluşmaktadır.
<ul><li><p>Header alanında JWT’yi imzalamak için kullanılacak algoritma belirtilmelidir. Standartlar kapsamında RS256 kullanılacaktır.</p></li> <li><p>Payload kısmında özel olarak oluşturulacak olan “body” claim alanına istek gövdesi (request body) verisinin SHA256 hash değeri karşılığı yazılmalıdır.</p></li> <li><p>JSON payload oluşturulurken RFC 7519 baz alınmalıdır. &quot;iss&quot; (Issuer) Claim, &quot;exp&quot; (Expiration Time) Claim, &quot;iat&quot; (Issued At) Claim, “body” Claim alanlarının gönderilmesi zorunludur.<a href="https://datatracker.ietf.org/doc/html/rfc7519#section-4" target="_blank" rel="noopener noreferrer">^RFC7519<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <p>a. &quot;iss&quot; (Issuer) Claim : Kurumunuza özel bilgidir.</p> <p>b. &quot;exp&quot; (Expiration Time) Claim: Saniye cinsinden (Unix time) imzanın son geçerli olduğu tarih. Bu tarih mevcut sunucu saatinizden 60 dakika sonra olacak şekilde kullanılmalıdır.</p> <p>c. &quot;iat&quot; (Issued At) Claim : Saniye cinsinden (Unix time) imzanın oluşturulduğu tarih. Bu tarih mevcut sunucu saatinizden 5 dakika önce olacak şekilde kullanılmalıdır.</p> <p>d. “body” Claim : istek gövdesi (request body) verisinin SHA256 hash değeri karşılığı.</p></li> <li><p>Signature alanında da özel anahtar ile imzalanmış olan imza içeriği yer alacaktır.</p></li></ul></li></ol></li></ul> <p><strong>X-JWS-Signature</strong>: JWS imzasını içeren üstbilgi. Bu başlığın ne zaman belirtilmesi gerektiği hususu ilgili endpoint için belirtilmiştir.</p> <p><strong>Örnek X-JWS-Signature Payload Değeri</strong></p> <p>{
&quot;iss&quot;: &quot;https://xbank.com.tr&quot;,
&quot;exp&quot;: 1646832405,
&quot;iat&quot;: 1646746005,
&quot;body&quot;: &quot;c543072f97a761a1d891dc81acc380bc1e6f61ca6541bd93ebfdece338457922&quot;
}</p> <ul><li><p>İstek gönderilir. Sadece mesajın bütünlüğünü ve doğruluğunu teyit amacı ile istek gövdesi (request body) SHA256 hash değeri imzalanarak X-JWS-Signature alanında bu imza iletilir. İsteğin gövde (request body) kısmı açık ve şifresiz olarak gönderilmektedir.</p></li> <li><p>İsteği alan ÖHS, talebi gerçekleştirmeden önce aldığı API isteklerinin imzasını doğrulamalıdır. X-JWS-Signature alanındaki JWT aşağıdaki adımlarla doğrulanmalıdır.</p> <ol><li>Header kısmındaki algoritmanin RS256 olduğu kontrol edilir.</li> <li>Gönderen katılımcının açık anahtarı ile JWT verify (doğrulama) işlemi yapılır.</li> <li>Yukarıdaki işlemlerin doğruluğunun ardından JWT’nin payload kısmındaki “body” claim alanındaki bilginin, isteğin gövde verisinin SHA256 hash değerlerinin aynı olduğu kontrol edilir.</li> <li>Örnek checksum değeri
&quot;a64b19f95eeb1fb0a0a3e2dbbc6e3d8472c52184d4543417ddc6d156fc5c5571&quot; veya
&quot;A64B19F95EEB1FB0A0A3E2DBBC6E3D8472C52184D4543417DDC6D156FC5C5571&quot; şeklinde olabilir. İki hali de aynı değere sahiptir.     Kontrollerde buna dikkat edilmesi gerekmektedir.</li></ol></li> <li><p>Yukarıdaki işlemler ile doğruluğu teyit edilmiş olan isteğin talebi gerçekleştirir.</p></li> <li><p>Eğer istek doğrulanamıyor ise gönderen kurumun açık ve özel anahtar çifti yenilenmiş olabilir.</p></li> <li><p>BKM OHS API üzerinden ilgili kurumun bilgilerini (kurum kodu vs) kullanarak kurumun detay bilgileri çeker ve kendi ortamında yeniler.</p></li> <li><p>Ardından imzayı tekrar açık anahtar ile doğrulayarak kontroller gerçekleştirilir. (Eğer halen doğrulama işlemi başarısız ise bu istek için hata akışı çalıştırılır. <strong>TR.OIS.Resource.InvalidSignature</strong> kodu ile hata üretilebilir.)</p></li> <li><p>İmza bilgisinin beklendiği (x-jws-signature) servislerde, bu bilginin iletilmediği durumlarda <strong>TR.OIS.Resource.MissingSignature</strong> hatası üretilebilir.</p></li> <li><p>İsteği alan ÖHS ; isteği işledikten sonra cevabı oluştururken de yukarıdaki akışlar ile göndereceği cevabı imzalamalıdır.</p></li> <li><p>İstek yanıt gövdesinin SHA256 checksum değeri için hexadecimal çıktı kullanılacaktır. Oluşacak çıktının 64 karakter olması beklenmektedir. Kontrol için &quot;^[A-Fa-f0-9]{64}$&quot; RegEx tarifini kullanabilirsiniz.</p></li></ul> <p><strong>Anahtar Deposu</strong></p> <p>ÖHS'ler tarafından güvenilen bir Güven Otoritesi (Trust Anchor), taraflar için bir genel anahtar deposu sağlamaktan sorumludur.
Güven Otoritesi, taraflardan herhangi birisinin oluşturduğu bir anahtar çiftinin açık bölümünü saklayan merkezi bir dizin (BKM tarafından tutulan merkezi kayıt sistemi vb.) olacaktır.
Mesajları doğrulamak için tarafların açık anahtarlarının paylaşılması için BKM bir servis sağlayacaktır. OHS API olarak adlandırılımış olan bu servis ile ÖHS listesine ulaşılabildiği gibi doğrulama işlemi için ihtiyaç duyulacak olan açık anahtarlara da bu servis üzerinden erişilebilinecektir.</p> <h2 id="_3-11-durum-kodu"><a href="#_3-11-durum-kodu" class="header-anchor">#</a> 3.11. Durum Kodu</h2> <p>API’ler, iki farklı amaca hizmet eden iki durum kodu kullanır:</p> <ul><li>HTTP Durum Kodu, API çağrısının (kaynaktaki HTTP işlemi) sonucunu yansıtır.</li> <li>Bazı kaynak payload’larındaki Durum alanı, kaynakların durumunu yansıtır.</li></ul> <h2 id="_3-12-gereksinimlerinin-sınıflandırılması"><a href="#_3-12-gereksinimlerinin-sınıflandırılması" class="header-anchor">#</a> 3.12. Gereksinimlerinin Sınıflandırılması</h2> <p>Erişim adreslerinin ve alanların kullanımı Zorunlu(Z), İsteğe Bağlı(İ), Koşullu(K), Yok(N/A) olabilir. Kullanımlara ilişkin durumlar ve kullanımın (K) koşullu olduğu duruma ilişkin açıklamalar ilgili tablolarda belirtilmiştir.</p> <p>Öİ API'lerinin istek ve yanıtta kullanılacak başlık isimleri, ilgili RFC dokümanlarında ve aşağıdaki tabloda yer aldığı şekilde kullanılacaktır. Uygulamaya özelleşmiş başlıklar &quot;X-&quot; ile başlayacaktır. Başlık isimlerinde yer alacak kısaltmalar tamamı büyük harfle yazılacak şekilde tanımlanacaktır. Başlık isimleri büyük – küçük harfe duyarlı olmamalıdır. Örneğin x-request-id ya da X-Request-ID olarak gönderilmiş olan bir istek başlığı değişkeni, sunucu tarafında hata vermeyecek şekilde işlenebilmelidir.</p> <h2 id="_3-13-istek-baslıgı"><a href="#_3-13-istek-baslıgı" class="header-anchor">#</a> 3.13. İstek Başlığı</h2> <ul><li>&quot;Başlık isimleri&quot; yorumlanırken küçük büyük harfe duyarlı olmamalıdır. Örneğin &quot;x-ReQuEsT-Id&quot;         geçerli bir başlık ismidir.</li> <li>&quot;Başlık değerleri&quot; yorumlanırken ise küçük büyük harf duyarlılığı olmalıdır. Örneğin &quot;xyz123&quot; ile &quot;XYZ123&quot; değerleri farklıdır.</li> <li>Başlık değerlerinde ISO-8859-1 standartında yer alan karakter kümesi kullanılmalıdır. Örneğin &quot;X-Request-Id&quot; değerinde &quot;İOS12&quot; yazmak, büyük &quot;İ&quot; harfinin ISO-8859-1 içerisinde yer almamasından dolayı, hataya yol açacaktır.</li> <li>İstek ve Yanıt başlığında yer alan alanların; POST GET PUT metotlarında, Zorunlu/Koşullu/İsteğe Bağlı/Yok kullanım durumları aşağıdaki tabloda listelenmiştir.</li> <li>OdemeIste nesnesinde POST,GET,PUT metotlarında isteği başlatan taraf alacaklı müşteri olacağı için alacaklı ÖHS kod ,x-source-code değeridir. OdemeIsteYaniti nesnesinde POST metotunda isteği başlatan borçlu olacağı için x-source-code değeri borçlu ÖHS kod bilgisidir.</li> <li>BKM'nin yapacağı ÖHS olay bildirimlerinde x-target-code ve x-source-code aynı değer olacak olup değişiklik yapılan OHS'ye ait kurum kodunu içerecektir.</li></ul> <p><strong>Tablo 2: İstek Başlığında Yer Alan Veriler</strong></p> <table><thead><tr><th>Başlık İsimleri</th> <th>Format</th> <th>Notlar</th> <th>POST</th> <th>GET</th> <th>PUT</th></tr></thead> <tbody><tr><td>X-Request-ID</td> <td>AN1..36</td> <td>İsteği başlatan ÖHS tarafından belirlenen çağrıya özgü talep kimliği. İstek numarası. <br> Örnek: Ödeme iste talebi iş akışının her adımında farklı “x-request-id” değeri kullanılır. <br> Çağrıların aynı yanıtı dönmesinin beklendiği durumlarda (idempotent işlemlerde) aynı değer ile çağrı yapılır.</td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>Content-Type</td> <td>AN1..20</td> <td>Standart HTTP Başlığı; Talepte sağlanan payload’ın biçimini temsil eder. Bu değerin application/json olarak gönderilmesi gerekmektedir. Hata durumlarında application/problem+json da iletilebilir.<br> (Başka bir değere ayarlanırsa, ÖHS, 415 Desteklenmeyen Ortam Türü (Unsupported Media Type) ile yanıt vermelidir)</td> <td>Z</td> <td>-</td> <td>Z</td></tr> <tr><td>X-Source-Code</td> <td>AN4</td> <td>İsteği başlatan Ödeme Hizmeti Sağlayıcısının (ÖHS) kodudur.</td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>X-Target-Code</td> <td>AN4</td> <td>İsteği alan Ödeme Hizmeti Sağlayıcısı (ÖHS) kodudur.</td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>Authorization</td> <td>AN1..4096</td> <td>Katılımcı ile GEÇİT arasındaki otorizasyon için kullanılan token bilgisidir.</td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>X-JWS-Signature</td> <td>AN1..4096</td> <td>HTTP isteğinin gövdesinin hash fonksiyonu (SHA256) ile özeti alınacaktır. Elde edilen özet, asimetrik anahtarları destekleyen bir algoritma kullanılarak imzalanacak ve JWS elde edilecektir.Bu başlığın ne zaman belirtilmesi gerektiği hususu ilgili endpoint için imzalama türü başlığında İmzalı İstek olarak belirtilmiştir.</td> <td>Z</td> <td>-</td> <td>Z</td></tr> <tr><td>PSU-Fraud-Check</td> <td>AN1..4096</td> <td>ÖHS'lerin çeşitli güvenlik kontrollerini gerçekleştirerek, önemli görülen aşağıdaki bilgileri birbirleri ile paylaşmaları gerekmektedir.<br> PSU-Fraud-Check alanının POST/odeme-iste servisi içerisinde gönderimi zorunludur. Flagler, JWT claims içine key value şeklinde eklenerek gönderilecektir. 3.10. Mesaj İmzalama Akışı'nda belirtilen yöntemle imzalanarak oluşturulan JWT PSU-Fraud-Check alanına konularak Alacaklı ÖHS tarafından Borçlu ÖHS'ye iletilmelidir. <br><br> Paylaşılacak bilgiler şu şekildedir.<br> <br><b>CustomerOpenDate</b> : Alıcı ÖHS tarafından, alıcı hesap sahibinin müşteri olma tarihi üzerinden geçen gün değerini ifade eder. <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.ZmnAralik sıralı veri tipinin alabileceği değerleri alabilir.<br> <br><b>AccountOpenDate</b> : Ödeme iste talebi içerisinde yer alan alıcı hesabın (Alıcı IBAN) açılma tarihi üzerinden geçen gün değerini ifade eder. <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.ZmnAralik sıralı veri tipinin alabileceği değerleri alabilir.<br> <br><b>CustomerAgeFlag</b> : Alıcı müşteriye ait yaş aralığını ifade eden değerdir. <br><strong>Gönderilmesi zorunlu alandır. Bireysel müşteriler için TR.OIS.DataCode.YasAralik veri tiplerinden 1,2,3,4,5 değerleri iletilmelidir. Tüzel/Kurumsal müşteriler için ise 0 değeri iletilmelidir.</strong> <br><br><b>RemoteCustomerFlag</b> : Alıcı müşterinin uzaktan müşteri edinimi ile oluşturulmuş bir müşteri bilgisi olup olmadığını belirten değerdir. <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.VarYok sıralı veri tipinin alabileceği değerleri alabilir. Örneğin; uzaktan müşteri edinimi ile kazanılmış bir müşteri ise değerin &quot;1:Kayıt Var&quot; olarak iletilmesi gerekmektedir.<br> <br><b>CustomerSalaryFlag</b> : Alıcı müşterinin Alıcı ÖHS içerisinde maaş müşterisi olup olmadığını belirten değerdir. <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.VarYok sıralı veri tipinin alabileceği değerleri alabilir. Örneğin; maaş müşterisi olan bir müşteri için değerin &quot;1:Kayıt Var&quot; olarak iletilmesi gerekmektedir.<br> <br><b>FirstRequestTimeFlag</b> : Alacaklı müşterinin Alacaklı ÖHS nezdinde ilk Ödeme İste talebi yaptığı tarih üzerinden geçen gün değerini ifade eder. <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.ZmnAralik sıralı veri tipinin alabileceği değerleri alabilir.<br> <br><b>DeviceFirstLoginFlag</b>  Müşterinin müşterilik ömründe işlem anında kullandığı cihazla ÖHS uygulamasına (web ya da uygulama tabanlı) ilk login olma süresini ifade eden değer. Müşteri cihaz değişikliği yaptığında DeviceFirstLoginFlag değeri değişmelidir.  <br> <strong>Gönderilmesi Zorunlu alandır.</strong><br>TR.OIS.DataCode.ZmnAralik sıralı veri tipinin alabileceği değerleri alabilir.<br> <br></td> <td>Z</td> <td>-</td> <td>-</td></tr></tbody></table> <p>PSU-Fraud-Check için imza bilgisi isteği alan ÖHS tarafından doğrulanmalıdır. Doğrulama işlemi başarısız olması durumunda <strong>TR.OIS.Resource.PsuFraudInvalidSignature</strong> kodu ile hata üretilmelidir.</p> <p>PSU-Fraud-Check bilgisinin iletilmediği durumlarda ise <strong>TR.OIS.Resource.PsuFraudMissingSignature</strong> kodu ile hata üretilmelidir.</p> <p>PSU-Fraud-Check içerisinde yer alan zorunlu alanlardan(Örn: CustomerOpenDate) herhangi birinin eksik olması durumunda iletilen eksik imza bilgisi için <strong>TR.OIS.Resource.PsuFraudInvalidFormat</strong> kodu ile hata üretilmelidir.</p> <h2 id="_3-14-yanıt-baslıgı"><a href="#_3-14-yanıt-baslıgı" class="header-anchor">#</a> 3.14. Yanıt Başlığı</h2> <ul><li>&quot;Başlık isimleri&quot; yorumlanırken küçük büyük harfe duyarlı olmamalıdır. Örneğin &quot;x-ReQuEsT-Id&quot; geçerli bir başlık ismidir.</li> <li>&quot;Başlık değerleri&quot; yorumlanırken ise küçük büyük harf duyarlılığı olmalıdır. Örneğin &quot;xyz123&quot; ile &quot;XYZ123&quot; değerleri farklıdır.</li> <li>Başlık değerlerinde ISO-8859-1 standartında yer alan karakter kümesi kullanılmalıdır. Örneğin &quot;X-Request-Id&quot; değerinde &quot;İOS12&quot;<br>
yazmak, büyük &quot;İ&quot; harfinin ISO-8859-1 içerisinde yer almamasından dolayı, hataya yol açacaktır.</li> <li>OdemeIste nesnesinde GET,POST,DELETE metotlarında isteği alan taraf borçlu müşteri olacağı için borçlu ÖHS kod ,x-target-code değeridir. OdemeIsteYaniti nesnesinde POST metotunda isteği alan alacaklı olacağı için x-target-code değeri alacaklı ÖHS kod bilgisidir.</li> <li>BKM'nin yapacağı ÖHS olay bildirimlerinde x-target-code ve x-source-code aynı değer olacak olup değişiklik yapılan OHS'ye ait kurum kodunu içerecektir.</li></ul> <p><strong>Tablo 3: Yanıt Başlığında Yer Alan Veriler</strong></p> <table><thead><tr><th>Başlık İsimleri</th> <th>Format</th> <th>Notlar</th> <th>POST</th> <th>GET</th> <th>PUT</th></tr></thead> <tbody><tr><td>X-Request-ID</td> <td>AN1..36</td> <td>İsteği başlatan ÖHS tarafından belirlenen çağrıya özgü talep kimliği. İstek numarası. <br> Örnek: Ödeme iste talebi iş akışının her adımında farklı “x-request-id” değeri kullanılır. <br> Çağrıların aynı yanıtı dönmesinin beklendiği durumlarda (idempotent işlemlerde) aynı değer ile çağrı yapılır. <br> <strong>İlgili istek başlığındaki bilgi geri dönülür.</strong></td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>Content-Type</td> <td>AN1..20</td> <td>Standart HTTP Başlığı; Talepte sağlanan payload’ın biçimini temsil eder. Bu değerin application/json olarak gönderilmesi gerekmektedir. Hata durumlarında application/problem+json da iletilebilir.<br> (Başka bir değere ayarlanırsa, ÖHS, 415 Desteklenmeyen Ortam Türü (Unsupported Media Type) ile yanıt vermelidir)</td> <td>Z</td> <td>-</td> <td>Z</td></tr> <tr><td>X-Source-Code</td> <td>AN4</td> <td>İsteği başlatan Ödeme Hizmeti Sağlayıcısının (ÖHS) kodudur. <br> <strong>İlgili istek başlığındaki bilgi geri dönülür</strong></td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>X-Target-Code</td> <td>AN4</td> <td>İsteği alan Ödeme Hizmeti Sağlayıcısının (ÖHS) kodudur. <br> <strong>İlgili istek başlığındaki bilgi geri dönülür.</strong></td> <td>Z</td> <td>Z</td> <td>Z</td></tr> <tr><td>X-JWS-Signature</td> <td>AN1..4096</td> <td>HTTP yanıtının gövdesinin hash fonksiyonu (SHA256) ile özeti alınacaktır. Elde edilen özet, asimetrik anahtarları destekleyen bir algoritma kullanılarak imzalanacak ve JWS elde edilecektir.Bu başlığın ne zaman belirtilmesi gerektiği hususu ilgili endpoint için imzalama türü başlığında İmzalı Yanıt olarak belirtilmiştir.</td> <td>Z</td> <td>Z</td> <td>Z</td></tr></tbody></table> <h2 id="_3-15-idempotency-kuralları"><a href="#_3-15-idempotency-kuralları" class="header-anchor">#</a> 3.15. Idempotency Kuralları</h2> <p>İsteği yapan ÖHS’nin aşağıdaki durumlarda aynı istek numarası (x-request-id) ve aynı veri gövdesiyle çağrıyı tekrarlaması; isteği alan ÖHS’nin de bu durumlarda aynı yanıtı dönmesi gereklidir.</p> <ul><li>İsteği alan ÖHS’nin yanıtı kesinti/arıza nedeniyle isteği yapan ÖHS’ye ulaşmaması ve zaman aşımı söz konusu olması,</li> <li>Müşteri, ÖHS uygulaması üzerinden çift tıklama ile mükerrer şekilde OI API’lerini çağırması, (API kontrollerinden önce ÖHS uygulamasının, çift tıklama kontrolü yapması önerilmektedir.)</li> <li>İsteği yapan ÖHS, yanıt almasına rağmen işleyemeden kaybetmesi,</li></ul> <p>durumlarında isteği alan ÖHS aşağıdaki kuralları işletir:</p> <ul><li>ÖHS gelen istek numarasını ve veri gövdesini birleştirerek checksum değeri üretir.
chesksum değeri x-request-id|request.body ‘nin hash algoritmalarından (CRC32,MD5 vb) geçirilerek üretilebilir.</li> <li>İsteği alan ÖHS bu checksum değeri ile isteği yapan ÖHS’ye dönmüş olduğu yanıtı 5 dk boyunca saklar. Saklama yöntemi olarak veri tabanı veya önbellek araçları kullanılabilir.</li> <li>İsteği yapan ÖHS aynı istek numarası ve aynı veri gövdesi ile yeni bir çağrı yaptığında, aynı checksum değeri üretileceği için 5dk boyunca bu değere karşılık gelen yanıtı döner.</li> <li>5 dk sonrasında istek numarası veya veri gövdesi değişmemiş olsa dahi bu isteği alan ÖHS tarafından yeni istek olarak kabul edilir.</li></ul> <p>Aşağıdaki Post işlemleri için bu kural setinin işletilmesi gerekmektedir:</p> <p>1- POST /odeme-iste</p> <h2 id="_3-16-http-durum-kodları"><a href="#_3-16-http-durum-kodları" class="header-anchor">#</a> 3.16. HTTP Durum Kodları</h2> <p>RFC 2616'da belirlenmiş olan durum kodları (status code) gönderilen isteğin durumunu  standart bir şekilde ifade eder. Eğer bir hata varsa hatayı, gönderilen istek başarılı bir şekilde işlem gördüyse ona ilişkin durumu aktarır. Durum kodları genel olarak 5 kategoridedir.</p> <ul><li>1xx Bilgi</li> <li>2xx Başarılı</li> <li>3xx Yönlendirme</li> <li>4xx İstemci Hatası</li> <li>5xx Sunucu Hatası</li></ul> <p><strong>errorCode Alanında Kullanılabilecek Sıralı Hata Tipleri :</strong></p> <blockquote><p><strong>TR.OIS.Resource</strong></p> <blockquote><p><strong>⇨	InvalidFormat</strong> <strong><br>InvalidFormat hata kodlarında fieldErrors içeriği gönderilmeli ve anlaşılır açıklama ile message , messageTr alanları doldurulmalıdır.</strong><br> <strong>⇨	NotFound</strong><br> <strong>⇨	InvalidSignature</strong><br> <strong>⇨	MissingSignature</strong><br> <strong>⇨	RecipientMismatch</strong><br> <strong>⇨	SenderMismatch</strong><br> <strong>⇨	MethodNotAllowed</strong><br> <strong>⇨	NotAcceptable</strong><br> <strong>⇨	PsuFraudInvalidSignature</strong><br> <strong>⇨	PsuFraudMissingSignature</strong><br> <strong>⇨	PsuFraudInvalidFormat</strong><br> <strong>⇨	RefNoAlreadyExists</strong><br> <strong>⇨	RefNoMismatch</strong><br> <strong>⇨	UnsupportedMediaType</strong></p></blockquote></blockquote> <blockquote><p><strong>TR.OIS.Business</strong></p> <blockquote><p><strong>⇨	InvalidContent</strong><br> <strong>⇨	RecipientAccountMismatch</strong><br> <strong>⇨	SenderAccountMismatch</strong><br> <strong>⇨	InvalidSenderTitle</strong><br> <strong>⇨	InvalidSenderAccount</strong><br> <strong>⇨	RestrictedAccount</strong><br> <strong>⇨	SenderRestrict</strong><br> <strong>⇨	InvalidExpireTime</strong><br> <strong>⇨	FastLimitExceeded</strong><br> <strong>⇨	StateMismatch</strong><br> <strong>⇨	InvalidApproveTime</strong><br> <strong>⇨	BlockedRecipient</strong><br> <strong>⇨	UnsupportedCorporate</strong><br> <strong>⇨	UnsupportedRequestedPaymentTime</strong></p></blockquote></blockquote> <blockquote><p><strong>TR.OIS.Connection</strong></p> <blockquote><p><strong>⇨	InvalidCertificate</strong><br> <strong>⇨	InvalidSender</strong><br> <strong>⇨	InvalidRecipient</strong><br> <strong>⇨ InvalidToken</strong></p></blockquote></blockquote> <blockquote><p><strong>TR.OIS.Server</strong></p> <blockquote><p><strong>⇨	InternalError</strong><br> <strong>⇨	ServiceUnavailable</strong></p></blockquote></blockquote> <p>TR.OIS.Resource.InvalidFormat hatası alındığı durumda; fieldErrors nesnesi içerisinde verilecek hata kodları :</p> <blockquote><p><strong>TR.OIS.Field</strong></p> <blockquote><p><strong>⇨	Missing</strong><br> <strong>⇨	Invalid</strong></p></blockquote></blockquote> <p><strong>Veri Tipi Örneği:</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b6ac3b8f-d604-12b6-bne1-3a800e270219&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-01T10:33:15+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Validation error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Şema kontrolleri başarısız&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fieldErrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;objectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;odemeIsteTalebi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tutarBilgi.paraBirimi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;messageTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boş değer olamaz&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;must not be null&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Field.Missing&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;objectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;odemeIsteTalebi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alacakliBilgi.musteriTipi.kimlik.kimlikDegeri&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;messageTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boyut '7' ile '11' arasında olmalı&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;size must be between 7 and 11&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Field.Invalid&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.InvalidFormat&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p><strong>Tablo 4: HTTP Durum Kodları</strong></p> <table><thead><tr><th>HTTP Durum</th> <th>İstek Sonucu ve Açıklamalar</th> <th>POST</th> <th>GET</th> <th>DELETE</th></tr></thead> <tbody><tr><td>200 OK</td> <td><strong>İstek Başarıyla Tamamlandı.</strong><br>Kaynak güncellemek için yapılan (örneğin, GET) ve başarıyla tamamlanan isteklerinde kullanılır.</td> <td>H</td> <td>E</td> <td>H</td></tr> <tr><td>201 Created</td> <td><strong>İstek Başarılı Oldu.</strong><br>Kaynak yaratma isteği (örneğin, POST /odeme-iste) başarıyla sonuçlandı.</td> <td>E</td> <td>H</td> <td>H</td></tr> <tr><td>204 No Content</td> <td><strong>Silme işlemi başarıyla tamamlandı.</strong><br>Kaynak silme isteği (örneğin, <strong>DELETE/odeme-iste/{odemeIsteRefNo}</strong>) başarıyla sonuçlandı.</td> <td>H</td> <td>H</td> <td>E</td></tr> <tr><td>400 Bad Request</td> <td><strong>İstekte bozuk, eksik veya uyumlu olmayan JSON gövdesi, URL parametreleri veya başlık alanları var.</strong> İstekle başlatılan işlem yapısal bozukluk, eksik veya tutarsız veri veya HHS tarafındaki kontrollerin hatalı sonuçlanması nedeniyle hata ile sonuçlanır ve hataya ilişkin veriler hata nesnesi içerisinde dönülür.</td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>401 Unauthorized</td> <td><strong>Yetkilendirme başlığı eksik, hatalı veya geçersiz olduğundan istek yetkilendirilmediğinde ve erişim reddedildiğinde http 401 kodu dönülmelidir.</strong></td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>404 Not Found</td> <td>**ÖHS geçerli bir API erişim adresini sağlamıyorsa, o URL'ye gelen istekler için 404 (Bulunamadı) ile yanıt vermelidir.**Uygulama esaslarında tanımlanmayan bir kaynak için bir URL'ye erişmeye çalışırsa (örneğin, GET /yurtdisi-odeme-iste), ÖHS, 404 (Bulunamadı) ile yanıt vermeyi seçebilir.</td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>405 Method Not Allowed</td> <td><strong>İsteği başlatan ÖHS, desteklenmeyen bir yöntemle kaynağa erişmeye çalıştı.</strong></td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>406 Not Acceptable</td> <td><strong>İstek, geçersiz bir karakter kümesi içeriyor.</strong></td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>415 Unsupported Media Type</td> <td><strong>İstek gövdesi hedef kaynakta bu yöntem tarafından desteklenmeyen bir biçimde oluşturulduğu için işlem reddedildi</strong></td> <td>E</td> <td>H</td> <td>H</td></tr> <tr><td>500 Internal Server Error</td> <td><strong>API sunucu / servis katmanında sorun oluştu. İşlem başarısız.</strong><br> 5XX hata durumlarında yanıt gövde değeri olmadığı için mesaj imzalama yapılamaz ve x-jws-signature alanı boş olarak iletilir.<br> Bu durumda x-jws-signature kontrolü yapılmamalıdır.</td> <td>E</td> <td>E</td> <td>E</td></tr> <tr><td>503 Service Unavailable</td> <td>Hizmet sürümü kullanımdan kaldırıldı veya hizmet verilemiyor durumu.</td> <td>E</td> <td>E</td> <td>E</td></tr></tbody></table> <p><strong>Hata Örnekleri:</strong></p> <p><ins><strong>400 Bad Request</strong></ins></p> <p><strong>TR.OIS.Business.InvalidContent</strong> hatası Borçlu ÖHS tarafından yapılacak iş kuralı kontrollerinin başarısız olduğu durumda verilmelidir.<br> <strong>TR.OIS.Resource.InvalidFormat</strong> hatası şema validasyonu, alan uzunluk ve varlık kontrollerinin başarısız olduğu durumda verilmelidir.
<strong><br>InvalidFormat hata kodlarında fieldErrors içeriği gönderilmeli ve anlaşılır açıklama ile message , messageTr alanları doldurulmalıdır.</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;b6ac3b8f-d604-12b6-bne1-3a800e270219&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-01T10:33:15+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Validation error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Şema kontrolleri başarısız&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fieldErrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;objectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;odemeIsteTalebi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;tutarBilgi.paraBirimi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;messageTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boş değer olamaz&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;must not be null&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Field.Missing&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;objectName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;odemeIsteTalebi&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;alacakliBilgi.musteriTipi.kimlik.kimlikDegeri&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;messageTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;boyut '1' ile '30' arasında olmalı&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;size must be between 1 and 30&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Field.Invalid&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.InvalidFormat&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>Zorunlu header alanlarından biri ya da birkaçı eksik olarak gönderilirse aşağıdaki gibi bir hata dönüşü gerçekleşebilir.</p> <p>Borçlu ÖHS uygulaması tarafından dönülebilecek hata örnekleri:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2005515d-f0e6-4a07-a439-0ef3b0f56011&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-02T10:39:26+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Validation error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Şema kontrolleri başarısız&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.InvalidFormat&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;fieldErrors&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>         
            <span class="token property">&quot;field&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X-Request-ID&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;messageTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X-Request-ID değeri boş olamaz.&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X-Request-ID cannot be null.&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;code&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Field.Invalid&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span> 

</code></pre></div><p>İstek başlığında yer alan x-target-code ile istek gövdesi içerisinde yer alan Borçlu ÖHS kod aynı olmadığı durumda dönülecek hata örneği:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2005515d-f0e6-4a07-a439-0ef3b0f56011&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-02T10:39:26+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Recipient Code Error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Borçlu ÖHS kod istek ve gövde değeri eşleşmiyor&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.SenderMismatch&quot;</span>
    
<span class="token punctuation">}</span> 

</code></pre></div><p>İstek başlığında yer alan x-source-code ile istek gövdesi içerisinde yer alan Alacaklı ÖHS kod aynı olmadığı durumda dönülecek hata örneği:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2005515d-f0e6-4a07-a439-0ef3b0f56011&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-02T10:39:26+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Recipient Code Error&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alacaklı ÖHS kod istek ve gövde değeri eşleşmiyor&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.RecipientMismatch&quot;</span>
    
<span class="token punctuation">}</span> 

</code></pre></div><p>Business hata örneği - 1:</p> <div class="language-JSON extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;677cfd9d-77c1-4ea3-8bdf-74a6e9887177&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-04T11:05:59+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;sender title wrong&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Gönderen Ünvan hatalı&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Business.InvalidSenderTitle&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>GEÇİT'te yapılan zorunlu header kontrollerinde aşağıdaki hatalar dönebilir:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-04T10:40:28+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;d4375748-6fc7-4f7e-94f3-6411cab1d59f&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Geçersiz ÖHS kodu.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Connection.InvalidRecipient&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Invalid Recipient Code&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>GEÇİT tarafından dönülecek hata örneği:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-05T10:40:28+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;d4375748-6fc7-4f7e-94f3-6411cab1d59f&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Geçersiz ÖHS kodu.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Connection.InvalidSender&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Invalid Sender Code&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">400</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Bad Request&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p>GEÇİT tarafından dönülecek hata örneği:</p> <div class="language-JSON extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-03T11:14:05+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ee1e3ea7-a5e5-468b-bb02-314148f84e6a&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Geçersiz öhs rolü. İlgili api çağrısı için yetkisi yok.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Connection.InvalidSenderRole&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Invalid Sender Role&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Forbidden&quot;</span>
<span class="token punctuation">}</span> 

</code></pre></div><p><ins><strong>401 Unauthorized</strong></ins></p> <p><strong>Borçlu ÖHS, İstek Başlığı içerisinde BKM tarafından iletilecek olan Authorization  hatalı olmasu durumunda 401 (Yetkisiz) http kodu ile aşağıdaki hata kodunu dönmelidir.</strong></p> <div class="language-json extra-class"><pre class="language-json"><code>
<span class="token punctuation">{</span>
    <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ed3fd667-fc58-40ad-a982-e8937faccd15&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-06T11:17:33+03:00&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">401</span><span class="token punctuation">,</span>
    <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Unauthorized&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Authorization Invalid&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Token bilgisi hatalıdır.&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Connection.InvalidToken&quot;</span>
<span class="token punctuation">}</span> 
 

</code></pre></div><p><ins><strong>403 Forbidden</strong></ins></p> <p>X-JWS-Signature zorunluluğu olan isteklerde gelmemesi durumunda TR.OIS.Resource.MissingSignature, hatalı gelmesi durumunda TR.OIS.Resource.InvalidSignature hata kodları Borçlu ÖHS tarafından dönülür ve Alacaklı ÖHS işleme devam edemez.</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;3e48ea98-f889-48b9-aa6e-28aabc6cfb14&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-06T11:20:05+03:00&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Forbidden&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X-JWS-Signature header not found in the Recipient request&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alacaklı OHS den gelen istekte X-JWS-Signature basligi bulunamadi.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.MissingSignature&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1a36bc78-d381-16a2-aa6e-28bcab3af633&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-05T11:20:05+03:00&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">403</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Forbidden&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;X-JWS-Signature header in the Recipient request could not be parsed&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Alacaklı OHS den gelen istekte X-JWS-Signature basligi okunamadi.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Resource.InvalidSignature&quot;</span>
<span class="token punctuation">}</span> 
</code></pre></div><p><ins><strong>500 Internal Server Error</strong></ins></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1b90c6dc-0277-4755-8b05-9297ddfab743&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-07T11:41:34+03:00&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">500</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Internal Server Error&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Unexpected condition was encountered.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Beklenmeyen bir durumla karşılaşıldı.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Server.InternalError&quot;</span>
<span class="token punctuation">}</span> 

</code></pre></div><p><ins><strong>503 Service Unavailable</strong></ins></p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  
  <span class="token property">&quot;id&quot;</span><span class="token operator">:</span> <span class="token string">&quot;e76315b7-09f4-4295-b6d8-1f7fec632159&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;path&quot;</span><span class="token operator">:</span> <span class="token string">&quot;/odeme-iste-api/ois/s1.0/odeme-iste&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2023-07-07T23:18:56+03:00&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpCode&quot;</span><span class="token operator">:</span> <span class="token number">503</span><span class="token punctuation">,</span>
  <span class="token property">&quot;httpMessage&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Service Unavailable&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformation&quot;</span><span class="token operator">:</span> <span class="token string">&quot;OHS is currently unavailable&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;moreInformationTr&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ÖHS şu anda hizmet veremiyor.&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;errorCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;TR.OIS.Server.ServiceUnavailable&quot;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_3-17-sıralı-veri-turleri"><a href="#_3-17-sıralı-veri-turleri" class="header-anchor">#</a> 3.17. Sıralı Veri Türleri</h2> <p><strong>Tablo 6: Sıralı Veri Türleri</strong></p> <table><thead><tr><th><strong>Kod</strong></th> <th><strong>Açıklama</strong></th></tr></thead> <tbody><tr><td>TR.OIS.DataCode.MusteriTip</td> <td>B: Bireysel <br>K: Kurumsal</td></tr> <tr><td>TR.OIS.DataCode.KimlikTur</td> <td>Kod, Tip, Format <br>K , TCKN , N11 <br>V, VKN, AN10 <br>Y , YKN , N11 <br>P , PNO , AN7..9</td></tr> <tr><td>TR.OIS.DataCode.OdemeAmaci</td> <td>Ödemenin Amacına yönelik olarak aşağıdaki değerlerden birini alır:<br>01: Konut Kirası Ödemesi<br>02: İş yeri Kirası Ödemesi<br>03: Diğer Kira Ödemesi<br>04: E-Ticaret Ödemesi: Elektronik ticaret işlem amaçlı aktarımlar<br>05: Çalışan Ödemesi: Maaş, harcırah, prim gibi çalışan ödemeleri<br>06: Ticari ödeme: Ticari işletmelerin birbirlerine, kendi hesaplarına veya müşterilerine ödemeleri, borç, ithalat, ihracat, şirket satın alma, vb. kapsamında ödemeler<br>07: Bireysel Ödeme: Özel amaçlı (aile bireylerine, hediye, bağış, borç, alışveriş vs.) ödemeler<br>08: Yatırım: Mevduat, menkul kıymet, döviz, gayrı menkul, taşıt, varlık alımı, temettü ödeme, tahsilat vb. gibi yatırım amaçlı ödemeler<br>09: Finansal: Kredi, depo, repo, türev, finansal varlık alım/satımı vb. ödemeler<br>10: Eğitim ödemesi<br>11: Aidat ödemesi<br>12: Diğer (Diğer seçeneği ÖHS &quot;Havale&quot; süreçleri için eklenmiştir. FAST işlemlerinde &quot;Diğer&quot; ödeme amacı kullanılmamalıdır.)</td></tr> <tr><td>TR.OIS.DataCode.AkisTur</td> <td>01: Kişiden Kişiye Ödemeler</td></tr> <tr><td>TR.OIS.DataCode.OHSDurumu</td> <td>A : Açık. Üretim Ortamında ÖHS’nin aktif bir şekilde hizmet vermesi durumu.<br> Y : Yaygınlaştırma. Üretim Ortamında ÖHS’nin kendisi tarafından tanımlanmış kısıtlı müşteriye hizmet vermesi durumu. <br>  G : Geçici Hizmet Veremiyor. ÖHS servislerinde teknik bir sorun olması nedeniyle ÖHS’nin hizmet verememesi durumu. <br>K: Kapalı. ÖHS’nin hizmet vermeme durumu.</td></tr> <tr><td>TR.OIS.DataCode.OdemeIsteDurumu</td> <td>B: Yanıt Bekleniyor<br>K: Kabul Edildi<br>G: Ödeme Sistemine İletildi<br>O: Ödeme Gerçekleşti<br> I: İptal Edildi</td></tr> <tr><td>TR.OIS.DataCode.OdemeIsteIptDtyKod</td> <td>'01': Borçlu Müşteri Ödeme İsteğini Reddetti<br>'02': Borçlu Müşteri Beklenen Sürede Ödeme İsteğine Yanıt Vermedi<br>'03': Borçlu ÖHS Fraud Nedeniyle İptal Etti<br>'04': Borçlu ÖHS Ödeme Sistemine İletemedi<br>'05': Borçlu ÖHS Ödeme İste Yanıt’ını Alacaklı ÖHS’ye İletemedi<br>'11': Alacaklı Müşteri Ödeme İste Talebinden Vazgeçti<br>'12': Alacaklı ÖHS Fraud Nedeniyle İptal Etti<br>'13':  Alacaklı ÖHS Ödeme İste Değerleri Uyuşmaması Nedeniyle İptal Etti<br>'21': FAST Sistem Hatası<br>'22':  FAST Ödeme İste Bilgileri Doğrulanamadı<br>'23':  FAST Ödeme İste Zaman Kontrolleri Doğrulanamadı<br></td></tr> <tr><td>TR.OIS.DataCode.EvetHayir</td> <td>E: Evet <br>H: Hayır</td></tr> <tr><td>TR.OIS.DataCode.OlayTip</td> <td>OHS_GUNCELLENDI</td></tr> <tr><td>TR.OIS.DataCode.KaynakTip</td> <td>OHS</td></tr> <tr><td>TR.OIS.DataCode.VarYok</td> <td>0: Kayıt Yok <br>1: Kayıt Var</td></tr> <tr><td>TR.OIS.DataCode.ZmnAralik</td> <td>1: 0-1 gün <br>2: 2-14 gün <br>3: 15-30 gün <br>4: 31-90 gün <br>5: 91 gün ve üstü</td></tr> <tr><td>TR.OIS.DataCode.YasAralik</td> <td>0:Tüzel/Kurumsal Müşteriler <br> 1: 1-20 yaş <br>2: 21-30 yaş <br>3: 31-40 yaş <br>4: 41-50 yaş <br>5: 51 yaş ve üzeri</td></tr></tbody></table></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/v1.0.0/contents/amac-ve-kapsam.html" class="prev">
        2. Amaç ve Kapsam
      </a></span> <span class="next"><a href="/v1.0.0/contents/odeme-iste-durumlari.html">
        4. Ödeme İste Durumları
      </a>
      →
    </span></p></div> <div class="footer-wrapper"><footer class="page-edit footer"><div class="footer-info"><p style="padding-right:15px;">© Tüm hakları saklıdır.</p></div></footer></div></main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.d7d3f13d.js" defer></script><script src="/assets/js/8.700583ab.js" defer></script><script src="/assets/js/2.9db75618.js" defer></script><script src="/assets/js/29.105f909f.js" defer></script>
  </body>
</html>
